# .travis.yml
language: go

# needed for the docker pipe
services:
- docker

go:
  - "1.10"
  - master

# builds should use vendor dir no go getting here m8
install: true

matrix:
  # It's ok if our code fails on unstable development versions of Go.
  allow_failures:
    - go: master
  fast_finish: true

before_script:
  - make tools
  - make deps

script:
  - make lint
  - make test
  - make build
#- make cover

after_success:
 - docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD" quay.io
 - test -n "$TRAVIS_TAG && curl -sL http://git.io/goreleaser | bash
